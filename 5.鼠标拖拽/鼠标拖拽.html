
<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<style>
			*{padding:0;margin:0}
			div{width:200px;height: 200px;background: #ccc;position: relative;cursor: pointer;}
		</style>
	</head>
	<body>
		<div></div>
		<script type="text/javascript">
			var oDiv = document.getElementsByTagName('div')[0];
				oDiv.onmousedown = function (ev){
					var ev = ev || event;
					var x = ev.clientX-oDiv.offsetLeft;//鼠标按下，记录鼠标位置距离方块的位置；
					var y = ev.clientY - oDiv.offsetTop;
					document.onmousemove = function (ev){move(ev,x,y)}//为了防止鼠标移动出现划出方块外，产生拖动不连贯的情况，把
					//事件加在document上面；
				}
				document.onmouseup = function (){
					document.onmousemove = null;

			}//当鼠标抬起时候，把鼠标移动时间置空；

			//把这个函数分离出来
			function move(ev,x,y){//传入两个参数，x,和y
					var ev = ev||event;
					var l = ev.clientX - x;//移动后方块的位置；
					var t = ev.clientY - y;
					if(l<0){l = 0}
					else if(l >document.documentElement.clientWidth - oDiv.offsetWidth){
						l =document.documentElement.clientWidth-oDiv.offsetWidth;
					};
					if(t<0){t=0}
						else if(t>= document.documentElement.clientHeight - oDiv.offsetHeight){
							t = document.documentElement.clientHeight-oDiv.offsetHeight;
						};//防止方块出界，宽度和高度限制；减去方块的宽度和高度
					oDiv.style.left = l + 'px';
					oDiv.style.top = t + 'px';//完了后进行赋值；
				}
		</script>
	</body>
</html>
